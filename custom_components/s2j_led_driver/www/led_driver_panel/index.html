<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>LED Driver Control Panel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="panel.css" />
  </head>
  <body>
    <h1>LED Driver Control Panel</h1>
    <p class="hint"><strong>Version:</strong> <span id="panel-version"></span></p>
    <p class="hint">
      Manage LED controllers, individual LEDs, logical groups, and dispatch on/off commands
      to every serial device in the group.
    </p>

    <div class="toolbar">
      <label>
         <select id="entry-select"></select>
      </label>
      <button id="load" class="primary">Refresh</button>
      <button id="export-registry" class="secondary">Export</button>
      <button id="import-registry-button" class="secondary">Import</button>
      <button id="clear-metadata" class="secondary">Clear Metadata</button>
      <input id="import-registry" type="file" accept="application/json" style="display:none;" />
      <span id="status" class="hint"></span>
    </div>

    <div class="grid">
      <section class="panel">
        <header>
          <h2>Power Overview</h2>
        </header>
        <div id="dashboard" class="dashboard-card"></div>
      </section>

      <section class="panel" id="groups-panel">
        <header>
          <h2>Groups</h2>
          <button class="secondary" id="refresh">Refresh</button>
        </header>
        <div id="groups" class="list"></div>
      </section>

      <section class="panel">
        <header>
          <h2>Switches</h2>
          <button class="secondary" id="add-switch">Add Switch</button>
        </header>
        <div id="switches" class="switch-list"></div>
        <div id="button-discoveries" class="button-discoveries"></div>
      </section>

      <section class="panel">
        <header>
          <h2>Controllers</h2>
          <button class="secondary" id="add-controller">Add Controller</button>
        </header>
        <div id="controllers" class="list"></div>
      </section>

      <section class="panel">
        <header>
          <h2>ACS Sensors</h2>
        </header>
        <div id="acs"></div>
      </section>

      <section class="panel">
        <header>
          <h2>Controller Ports</h2>
        </header>
        <div id="controller-map" class="controller-map"></div>
      </section>

      <section class="panel">
        <header>
          <h2>Driver Inventory</h2>
          <button class="secondary" id="add-driver">Add Driver</button>
        </header>
        <div id="drivers" class="list"></div>
      </section>

      <section class="panel">
        <header>
          <h2>Group Definitions</h2>
          <button class="secondary" id="add-group">Add Group</button>
        </header>
        <div id="group-defs" class="list"></div>
      </section>

      <section class="panel">
        <header>
          <h2>SSR Outputs</h2>
          <button class="secondary" id="add-ssr">Add SSR</button>
        </header>
        <div id="ssr-panel"></div>
      </section>

      <section class="panel">
        <header>
          <h2>Patch Panel</h2>
        </header>
        <div id="patch-panel">
          <div class="patch-panel-visual" id="patch-panel-visual">
            <img src="48-port.png" alt="48-port patch panel" class="patch-panel-bg" />
            <div id="patch-panel-ports" class="patch-panel-port-grid"></div>
            <div id="patch-panel-tooltip" class="patch-panel-tooltip" hidden></div>
          </div>
          <div id="patch-panel-details" class="patch-panel-details">
            <p class="hint">Select a port to view details.</p>
          </div>
        </div>
      </section>

      <section class="panel">
        <header>
          <h2>Serial Activity</h2>
        </header>
        <div id="serial-log" class="serial-log"></div>
      </section>

      <p id="error" class="error"></p>
    </div>

    <script type="module" src="js/panel.js"></script>
  </body>
</html>
